## Types for `"extendable-lexical-editor"`

### What is `LexicalSchema.d.ts`?

- Generated by an LLM (ChatGPT 5) after reviewing `./src/nodes/PlaygroundNodes.ts` and its dependencies.
- A standalone serialized schema enumerating all nodes registered in `src/nodes/PlaygroundNodes.ts`, including custom nodes that are not part of any `@lexical/*` package.

### Why does this file exist?

- The intention of `LexicalSchema.d.ts` is to provide a clear standalone schema for producing valid Lexical JSON for this project.
- By adhering to the types defined in `LexicalSchema.d.ts` alone (without cross-referencing type information elsewhere), you can construct valid `editorState` JSON that loads correctly in `"extendable-lexical-editor"`.

### What is `LexicalSchemaSample.lexical`?

- `LexicalSchemaSample.lexical` is a concrete, valid JSON document that follows the types in `LexicalSchema.d.ts`.
- It can be loaded into the editor as a working example of how to structure serialized nodes (including custom nodes) according to the schema.

### How to use `LexicalSchema.d.ts`

- Import the types from the package:

```ts
import type {
  SerializedPlaygroundFile,
  SerializedRootNode,
  SerializedParagraphNode,
  SerializedTextNode,
} from 'extendable-lexical-editor/lexical-schema';
```

- Build a minimal document (strongly typed) and serialize:

```ts
const root: SerializedRootNode = {
  type: 'root',
  version: 1,
  direction: null,
  format: '',
  indent: 0,
  children: [
    {
      type: 'paragraph',
      version: 1,
      direction: null,
      format: '',
      indent: 0,
      children: [
        {
          // Text node
          type: 'text',
          version: 1,
          text: 'Hello world',
          format: 0,
          detail: 0,
          mode: 'normal',
          style: '',
        } satisfies SerializedTextNode,
      ],
    } satisfies SerializedParagraphNode,
  ],
};

const file: SerializedPlaygroundFile = {
  editorState: {root},
  lastSaved: Date.now(),
  source: 'example',
  version: '1',
};
```

- Optional `$` `NodeState`, found on every node can be use to store JSON-serializable data:

```ts
const paragraphWithState: SerializedParagraphNode = {
  type: 'paragraph',
  version: 1,
  direction: null,
  format: '',
  indent: 0,
  $: {metadata: {source: 'user'}}, // shape is controlled by NodeStateRecord
  children: [],
};
```

- `NodeState` can be augmented projectâ€‘wide via module augmentation:

```ts
// e.g. src/types/custom-node-state.d.ts in your app
declare module 'extendable-lexical-editor/lexical-schema' {
  interface CustomNodeState {
    metadata?: {
      source?: 'ai' | 'user';
      tags?: string[];
    };
  }
}
```

- Tips:
  - Ensure every node includes `type` and `version: 1`.
  - Element nodes require `children`, `direction`, `format`, and `indent`.
  - Only the nodes enumerated in this schema are supported by the Playground setup; add more here if you register additional nodes.


### Scope and updates

- The schema is intentionally scoped to the nodes registered in `PlaygroundNodes.ts`. If you add or remove nodes there, update `LexicalSchema.d.ts` accordingly so the contract remains accurate.
